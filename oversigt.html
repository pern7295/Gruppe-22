<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vin oversigt | Torn P</title>
    <link rel="stylesheet" href="oversigt.css">
    <link rel="stylesheet" href="main.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
<meta name="Description" content="Put your description here.">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">

    <link rel="icon" type="image/png" href="img/logo.png">

    <style>


    </style>
</head>

<body>
    <header class="p_header">
        <!--Primære Navigation på siden-->
        <nav id="overordnet-nav">

            <!--Logo og BurgerMenu til mobil version-->
            <a href="index.html"><img src="img/logo.png" alt="" class="logo2"></a>
            <div id="burgermenu">
               <!--Stregerne til burgermenuen-->
                <div id="burgermenu_container">
                    <div id="bar1" class="bar"></div>
                    <div id="bar2" class="bar"></div>
                    <div id="bar3" class="bar"></div>
                </div>
            </div>

            <!--Links til undersider i burgermenu-->
            <div class="burgermenu_link">
                <div id="burger1" class="burger_link">

                    <a href="oversigt.html">Udvalg</a>
                </div>
                <div id="burger2" class="burger_link">
                    <a href="events.html">Events</a>
                </div>
                <div id="burger3" class="burger_link">
                    <a href="om_os.html">Om os</a>
                </div>
                <div id="burger4" class="burger_link">
                    <a href="kontakt.html">Kontakt</a>
                </div>
            </div>

            <!--Baggrund på burgermenu, ved klik-->
            <div id="burger_bck" class="burger_bck"></div>

            <!--Navigation til web version-->
            <div class="alm_menu">
                <a href="index.html"><img src="img/logo.png" alt="Logo"></a>
                <a href="oversigt.html" class="hovereffect">Udvalg</a>
                <a href="events.html" class="hovereffect">Events</a>
                <a href="om_os.html" class="hovereffect">Om os</a>
                <a href="kontakt.html" class="hovereffect">Kontakt</a>

            </div>


        </nav>

    </header>


    <main>

        <!--Splashbillede (ligger i css som background)-->
        <section class="splash"></section>


        <!--Sekunderdær filtrering med h2 og p over.-->
        <nav id="filtrering-nav">
            <h2 class="vin-overskrift">Vin</h2>
            <p class="intro-tekst">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime iure sed beatae ducimus amet. Non minima in corporis sunt quidem quia hic earum rerum tempore aliquid ipsum, nesciunt eius natus deserunt! Cumque, harum possimus commodi </p>


            <div class="button_flex">

                <!--Filteringsknapper med data attributter-->
                <div class="flexiii">
                    <button data-land="alle" class="valgt">Alle vin</button>

                </div>
                <div class="flexii">
                    <img src="img/italy_flag.png" alt="" class="ikon_italien">
                    <button data-land="Italien">Italien</button>
                </div>

                <div class="flexii">
                    <img src="img/france_flag.png" alt="" class="ikon_frankrig">
                    <button data-land="Frankrig">Frankrig</button>
                </div>

                <div class="flexii">
                    <img src="img/spain_flag.png" alt="" class="ikon_spanien">
                    <button data-land="Spanien">Spanien</button>
                </div>

                <div class="flexii">
                    <img src="img/argentina_flag.png" alt="" class="ikon_argentina">
                    <button data-land="Argentina">Argentina</button>
                </div>
            </div>


            <!--Dropdown menu til mobilversion af sekundær filtrering-->
            <div class="dropdown">
                <button class="dropbtn">Vælg Land</button>
                <div class="dropdown-content">
                    <div class="flexiii">
                        <button data-land="alle" class="valgt dropbtn">Alle vin</button>

                    </div>
                    <div class="flexii">
                        <img src="img/italy_flag.png" alt="" class="ikon_italien">
                        <button data-land="Italien">Italien</button>
                    </div>

                    <div class="flexii">
                        <img src="img/france_flag.png" alt="" class="ikon_frankrig">
                        <button data-land="Frankrig">Frankrig</button>
                    </div>

                    <div class="flexii">
                        <img src="img/spain_flag.png" alt="" class="ikon_spanien">
                        <button data-land="Spanien">Spanien</button>
                    </div>

                    <div class="flexii">
                        <img src="img/argentina_flag.png" alt="" class="ikon_argentina">
                        <button data-land="Argentina">Argentina</button>
                    </div>
                </div>
            </div>


        </nav>



        <section id="liste">
        </section>



        <!--Template til html skabelon med enkelte vine og deres kategorier.-->
        <template>
            <article class="wines wines-pic">
                <img src="" alt="" class="billede">
                <h3 class="navn"></h3>
                <p class="vintype"></p>
                <p class="land"></p>
                <!--<p class="beskrivelse"></p>-->
                <p class="pris"></p>
                <p class="fake_button">Læs mere</p>
            </article>
        </template>
    </main>
    <footer>

        <div id="footer_flex">
            <div class="col_1">
                <h4>Åbningstider</h4>
                <div class="line"></div>
                <p>Mandag - Fredag</p>
                <p>10.00 - 17.00</p>
                <p>Lørdag</p>
                <p>10.00 - 14.00</p>
                <p>Søndag</p>
                <p>Lukket</p>
            </div>
            <div class="col_2">
                <h4>Socialemedier</h4>
                <div class="line"></div>
                <img src="img/instagram.png" alt="Instagram Logo">
                <img src="img/facebook.png" alt="Instagram Logo">
            </div>
            <div class="col_3">
                <h4>Kontakt</h4>
                <div class="line"></div>
                <p>Tlf.</p>
                <p>+45 12 34 56 78</p>
                <p>Email</p>
                <p>godvin@email.dk</p>
            </div>
        </div>


        <p class="footer_tekst">Fælles Passion Projekt | Gruppe 22 | 2.semester MMD</p>
    </footer>

    <!--Back to top knap-->
    <a class="gotopbtn" href="#"> <i class="fas fa-angle-up single_ani"></i>
    </a>

    <script src="script.js"></script>

    <script>
        /**/
        const header = document.querySelector("h2");

        /*Til at hente billeder*/
        const medieurl = "https://tema7-763a.restdb.io/media/"

        /*Henter apikey fra restdb som bruges til at hente data.*/
        const myHeaders = {

            "x-apikey": "602e5f605ad3610fb5bb6308"
        }

        /*Når siden er loadet går funktionen start igang.*/
        document.addEventListener("DOMContentLoaded", start);

        /*Deifneret variablerne vine og filter som skal bruges i de næste funktioner*/
        let vine;
        let filter = "alle";

        /*Filterknapper bliver defineret som en konstant og der gøres så man kan klikke på filter knapperne*/
        function start() {
            console.log(start);

            const filterKnapper = document.querySelectorAll("nav button");

            filterKnapper.forEach(knap => knap.addEventListener("click", filtrerVine));

            loadJSON();

        }

        /*/*Her startes funktionen hvor filter knapperne skifter i forhold til hvad man trykker på og viser dens indhold.*/
        function filtrerVine() {
            console.log(filtrerVine);

            filter = this.dataset.land;

            document.querySelector(".valgt").classList.remove("valgt");

            this.classList.add("valgt");

            visVine();
            header.textContent = this.textContent;
        }

        /*Der hentes data fra json fra url'en, som så sendes videre til funktionen VisVine*/
        async function loadJSON() {
            const JSONData = await fetch("https://tema7-763a.restdb.io/rest/vinsite", {
                headers: myHeaders
            });

            vine = await JSONData.json();
            console.log("vine", vine);
            visVine();

        }

        /*Her sættes hver vin ind i html så det blive vist på sitet. der bliver defineret to konstanter, dest og skabelon.*/
        function visVine() {
            console.log(visVine);

            const dest = document.querySelector("#liste");
            const skabelon = document.querySelector("template").content;


            dest.textContent = ""; /*Der tømmes for indhold så der kan komme nyt i.*/
            vine.forEach(vin => {
                /*array'et vine løbes igennem og hver vin indsættes i html*/

                if (filter == vin.land || filter == "alle") {
                    const klon = skabelon.cloneNode(true); /*html template klones og fyldes med indhold*/

                    klon.querySelector(".billede").src = medieurl + vin.billede;
                    klon.querySelector(".navn").textContent = vin.navn;
                    klon.querySelector(".vintype").textContent = "Vintype:" + " " + vin.vintype;
                    klon.querySelector(".land").textContent = "Land:" + " " + vin.land;
                    klon.querySelector(".pris").textContent = "Pris:" + " " + vin.pris + ",-";

                    klon.querySelector(".wines").addEventListener("click", () => visDetaljer(vin)); /*Går videre til funktion visDetaljer der viser en single*/

                    dest.appendChild(klon); /*klonen tilføjes til DOM*/
                }
            })

            /*Funktionen visDetaljer linker til en ny location via linket til singlepage sitet vha. id*/
            function visDetaljer(hvilken) {
                location.href = `singleView.html?id=${hvilken._id}`;
            }

        }



      /*  document.addEventListener("DOMContentLoaded", start2);

        //Der klikkes på burgermenuen
        function start2() {
            document.querySelector("#burgermenu").addEventListener("click", onClickMenu);
        }

        //Når der er klikket på burgermenuen, benyttes css-toggle-classes til at ændre udseende på menuen
        function onClickMenu() {
            document.querySelector("#burgermenu_container").classList.toggle("change");
            document.querySelector(".burgermenu_link").classList.toggle("change");
            document.querySelector(".burger_bck").classList.toggle("change_img");
            document.querySelector("#burger1").classList.toggle("change1");
            document.querySelector("#burger2").classList.toggle("change1");
            document.querySelector("#burger3").classList.toggle("change1");
            document.querySelector("#burger4").classList.toggle("change1");

        }*/

    </script>
</body>

</html>
